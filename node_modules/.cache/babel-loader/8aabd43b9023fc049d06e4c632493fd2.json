{"ast":null,"code":"import _objectSpread from\"/Users/xcodedeveloper/Desktop/grade0swap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/xcodedeveloper/Desktop/grade0swap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{Container,Grid,IconButton,makeStyles,Paper,Typography}from\"@material-ui/core\";import SwapVerticalCircleIcon from\"@material-ui/icons/SwapVerticalCircle\";import{useSnackbar}from\"notistack\";import LoopIcon from\"@material-ui/icons/Loop\";import{getAccount,getFactory,getProvider,getRouter,getSigner,getNetwork,getAmountOut,getBalanceAndSymbol,getWeth,swapTokens,getReserves}from\"../ethereumFunctions\";import CoinField from\"./CoinField\";import CoinDialog from\"./CoinDialog\";import LoadingButton from\"../Components/LoadingButton\";import WrongNetwork from\"../Components/wrongNetwork\";import COINS from\"../constants/coins\";import*as chains from\"../constants/chains\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=function styles(theme){return{paperContainer:{borderRadius:theme.spacing(2),padding:theme.spacing(1),paddingBottom:theme.spacing(3)},switchButton:{zIndex:1,margin:\"-16px\",padding:theme.spacing(0.5)},fullWidth:{width:\"100%\"},title:{textAlign:\"center\",padding:theme.spacing(0.5),marginBottom:theme.spacing(1)},hr:{width:\"100%\"},balance:{padding:theme.spacing(1),overflow:\"wrap\",textAlign:\"center\"},footer:{marginTop:\"285px\"}};};var useStyles=makeStyles(styles);function CoinSwapper(props){var classes=useStyles();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;// Stores a record of whether their respective dialog window is open\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),dialog1Open=_React$useState2[0],setDialog1Open=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),dialog2Open=_React$useState4[0],setDialog2Open=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),wrongNetworkOpen=_React$useState6[0],setwrongNetworkOpen=_React$useState6[1];// Stores data about their respective coin\nvar _React$useState7=React.useState({address:undefined,symbol:undefined,balance:undefined}),_React$useState8=_slicedToArray(_React$useState7,2),coin1=_React$useState8[0],setCoin1=_React$useState8[1];var _React$useState9=React.useState({address:undefined,symbol:undefined,balance:undefined}),_React$useState10=_slicedToArray(_React$useState9,2),coin2=_React$useState10[0],setCoin2=_React$useState10[1];// Stores the current reserves in the liquidity pool between coin1 and coin2\nvar _React$useState11=React.useState([\"0.0\",\"0.0\"]),_React$useState12=_slicedToArray(_React$useState11,2),reserves=_React$useState12[0],setReserves=_React$useState12[1];// Stores the current value of their respective text box\nvar _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),field1Value=_React$useState14[0],setField1Value=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),field2Value=_React$useState16[0],setField2Value=_React$useState16[1];// Controls the loading button\nvar _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),loading=_React$useState18[0],setLoading=_React$useState18[1];// Switches the top and bottom coins, this is called when users hit the swap button or select the opposite\n// token in the dialog (e.g. if coin1 is TokenA and the user selects TokenB when choosing coin2)\nvar switchFields=function switchFields(){setCoin1(coin2);setCoin2(coin1);setField1Value(field2Value);setReserves(reserves.reverse());};// These functions take an HTML event, pull the data out and puts it into a state variable.\nvar handleChange={field1:function field1(e){setField1Value(e.target.value);}};// Turns the account's balance into something nice and readable\nvar formatBalance=function formatBalance(balance,symbol){if(balance&&symbol)return parseFloat(balance).toPrecision(8)+\" \"+symbol;else return\"0.0\";};// Turns the coin's reserves into something nice and readable\nvar formatReserve=function formatReserve(reserve,symbol){if(reserve&&symbol)return reserve+\" \"+symbol;else return\"0.0\";};// Determines whether the button should be enabled or not\nvar isButtonEnabled=function isButtonEnabled(){// If both coins have been selected, and a valid float has been entered which is less than the user's balance, then return true\nvar parsedInput1=parseFloat(field1Value);var parsedInput2=parseFloat(field2Value);return coin1.address&&coin2.address&&!isNaN(parsedInput1)&&!isNaN(parsedInput2)&&0<parsedInput1&&parsedInput1<=coin1.balance;};// Called when the dialog window for coin1 exits\nvar onToken1Selected=function onToken1Selected(address){// Close the dialog window\nsetDialog1Open(false);// If the user inputs the same token, we want to switch the data in the fields\nif(address===coin2.address){switchFields();}// We only update the values if the user provides a token\nelse if(address){// Getting some token data is async, so we need to wait for the data to return, hence the promise\ngetBalanceAndSymbol(props.network.account,address,props.network.provider,props.network.signer,props.network.weth.address,props.network.coins).then(function(data){setCoin1({address:address,symbol:data.symbol,balance:data.balance});});}};// Called when the dialog window for coin2 exits\nvar onToken2Selected=function onToken2Selected(address){// Close the dialog window\nsetDialog2Open(false);// If the user inputs the same token, we want to switch the data in the fields\nif(address===coin1.address){switchFields();}// We only update the values if the user provides a token\nelse if(address){// Getting some token data is async, so we need to wait for the data to return, hence the promise\ngetBalanceAndSymbol(props.network.account,address,props.network.provider,props.network.signer,props.network.weth.address,props.network.coins).then(function(data){setCoin2({address:address,symbol:data.symbol,balance:data.balance});});}};// Calls the swapTokens Ethereum function to make the swap, then resets nessicary state variables\nvar swap=function swap(){console.log(\"Attempting to swap tokens...\");setLoading(true);swapTokens(coin1.address,coin2.address,field1Value,props.network.router,props.network.account,props.network.signer).then(function(){setLoading(false);// If the transaction was successful, we clear to input to make sure the user doesn't accidental redo the transfer\nsetField1Value(\"\");enqueueSnackbar(\"Transaction Successful\",{variant:\"success\"});}).catch(function(e){setLoading(false);enqueueSnackbar(\"Transaction Failed (\"+e.message+\")\",{variant:\"error\",autoHideDuration:10000});});};// The lambdas within these useEffects will be called when a particular dependency is updated. These dependencies\n// are defined in the array of variables passed to the function after the lambda expression. If there are no dependencies\n// the lambda will only ever be called when the component mounts. These are very useful for calculating new values\n// after a particular state change, for example, calculating the new exchange rate whenever the addresses\n// of the two coins change.\n// This hook is called when either of the state variables `coin1.address` or `coin2.address` change.\n// This means that when the user selects a different coin to convert between, or the coins are swapped,\n// the new reserves will be calculated.\nuseEffect(function(){console.log(\"Trying to get Reserves between:\\n\"+coin1.address+\"\\n\"+coin2.address);if(coin1.address&&coin2.address){getReserves(coin1.address,coin2.address,props.network.factory,props.network.signer,props.network.account).then(function(data){return setReserves(data);});}},[coin1.address,coin2.address,props.network.account,props.network.factory,props.network.router,props.network.signer]);// This hook is called when either of the state variables `field1Value` `coin1.address` or `coin2.address` change.\n// It attempts to calculate and set the state variable `field2Value`\n// This means that if the user types a new value into the conversion box or the conversion rate changes,\n// the value in the output box will change.\nuseEffect(function(){if(isNaN(parseFloat(field1Value))){setField2Value(\"\");}else if(parseFloat(field1Value)&&coin1.address&&coin2.address){getAmountOut(coin1.address,coin2.address,field1Value,props.network.router,props.network.signer).then(function(amount){return setField2Value(amount.toFixed(7));}).catch(function(e){console.log(e);setField2Value(\"NA\");});}else{setField2Value(\"\");}},[field1Value,coin1.address,coin2.address]);// This hook creates a timeout that will run every ~10 seconds, it's role is to check if the user's balance has\n// updated has changed. This allows them to see when a transaction completes by looking at the balance output.\nuseEffect(function(){var coinTimeout=setTimeout(function(){console.log('props: ',props);console.log(\"Checking balances...\");if(coin1.address&&coin2.address&&props.network.account){getReserves(coin1.address,coin2.address,props.network.factory,props.network.signer,props.network.account).then(function(data){return setReserves(data);});}if(coin1.address&&props.network.account&&!wrongNetworkOpen){getBalanceAndSymbol(props.network.account,coin1.address,props.network.provider,props.network.signer,props.network.weth.address,props.network.coins).then(function(data){setCoin1(_objectSpread(_objectSpread({},coin1),{},{balance:data.balance}));});}if(coin2.address&&props.network.account&&!wrongNetworkOpen){getBalanceAndSymbol(props.network.account,coin2.address,props.network.provider,props.network.signer,props.network.weth.address,props.network.coins).then(function(data){setCoin2(_objectSpread(_objectSpread({},coin2),{},{balance:data.balance}));});}},10000);return function(){return clearTimeout(coinTimeout);};});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CoinDialog,{open:dialog1Open,onClose:onToken1Selected,coins:props.network.coins,props:props.network.signer}),/*#__PURE__*/_jsx(CoinDialog,{open:dialog2Open,onClose:onToken2Selected,coins:props.network.coins,signer:props.network.signer}),/*#__PURE__*/_jsx(WrongNetwork,{open:wrongNetworkOpen}),/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Paper,{className:classes.paperContainer,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",className:classes.title,children:\"Swap Coins\"}),/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",alignItems:\"center\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.fullWidth,children:/*#__PURE__*/_jsx(CoinField,{activeField:true,value:field1Value,onClick:function onClick(){return setDialog1Open(true);},onChange:handleChange.field1,symbol:coin1.symbol!==undefined?coin1.symbol:\"Select\"})}),/*#__PURE__*/_jsx(IconButton,{onClick:switchFields,className:classes.switchButton,children:/*#__PURE__*/_jsx(SwapVerticalCircleIcon,{fontSize:\"medium\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.fullWidth,children:/*#__PURE__*/_jsx(CoinField,{activeField:false,value:field2Value,onClick:function onClick(){return setDialog2Open(true);},symbol:coin2.symbol!==undefined?coin2.symbol:\"Select\"})}),/*#__PURE__*/_jsx(\"hr\",{className:classes.hr}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Your Balances\"}),/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.balance,children:formatBalance(coin1.balance,coin1.symbol)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.balance,children:formatBalance(coin2.balance,coin2.symbol)})})]}),/*#__PURE__*/_jsx(\"hr\",{className:classes.hr}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Reserves\"}),/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.balance,children:formatReserve(reserves[0],coin1.symbol)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.balance,children:formatReserve(reserves[1],coin2.symbol)})})]}),/*#__PURE__*/_jsx(\"hr\",{className:classes.hr}),/*#__PURE__*/_jsxs(LoadingButton,{loading:loading,valid:isButtonEnabled(),success:false,fail:false,onClick:swap,children:[/*#__PURE__*/_jsx(LoopIcon,{}),\"Swap\"]})]})]})}),/*#__PURE__*/_jsx(Grid,{container:true,className:classes.footer,direction:\"row\",justifyContent:\"center\",alignItems:\"flex-end\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Grade0 Swap Interface\"})})]});}export default CoinSwapper;","map":{"version":3,"sources":["/Users/xcodedeveloper/Desktop/grade0swap/src/CoinSwapper/CoinSwapper.js"],"names":["React","useEffect","Container","Grid","IconButton","makeStyles","Paper","Typography","SwapVerticalCircleIcon","useSnackbar","LoopIcon","getAccount","getFactory","getProvider","getRouter","getSigner","getNetwork","getAmountOut","getBalanceAndSymbol","getWeth","swapTokens","getReserves","CoinField","CoinDialog","LoadingButton","WrongNetwork","COINS","chains","styles","theme","paperContainer","borderRadius","spacing","padding","paddingBottom","switchButton","zIndex","margin","fullWidth","width","title","textAlign","marginBottom","hr","balance","overflow","footer","marginTop","useStyles","CoinSwapper","props","classes","enqueueSnackbar","useState","dialog1Open","setDialog1Open","dialog2Open","setDialog2Open","wrongNetworkOpen","setwrongNetworkOpen","address","undefined","symbol","coin1","setCoin1","coin2","setCoin2","reserves","setReserves","field1Value","setField1Value","field2Value","setField2Value","loading","setLoading","switchFields","reverse","handleChange","field1","e","target","value","formatBalance","parseFloat","toPrecision","formatReserve","reserve","isButtonEnabled","parsedInput1","parsedInput2","isNaN","onToken1Selected","network","account","provider","signer","weth","coins","then","data","onToken2Selected","swap","console","log","router","variant","catch","message","autoHideDuration","factory","amount","toFixed","coinTimeout","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport {\n  Container,\n  Grid,\n  IconButton,\n  makeStyles,\n  Paper,\n  Typography,\n} from \"@material-ui/core\";\nimport SwapVerticalCircleIcon from \"@material-ui/icons/SwapVerticalCircle\";\nimport { useSnackbar } from \"notistack\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport {\n  getAccount,\n  getFactory,\n  getProvider,\n  getRouter,\n  getSigner,\n  getNetwork,\n  getAmountOut,\n  getBalanceAndSymbol,\n  getWeth,\n  swapTokens,\n  getReserves,\n} from \"../ethereumFunctions\";\nimport CoinField from \"./CoinField\";\nimport CoinDialog from \"./CoinDialog\";\nimport LoadingButton from \"../Components/LoadingButton\";\nimport WrongNetwork from \"../Components/wrongNetwork\";\nimport COINS from \"../constants/coins\";\nimport * as chains from \"../constants/chains\";\n\nconst styles = (theme) => ({\n  paperContainer: {\n    borderRadius: theme.spacing(2),\n    padding: theme.spacing(1),\n    paddingBottom: theme.spacing(3),\n  },\n  switchButton: {\n    zIndex: 1,\n    margin: \"-16px\",\n    padding: theme.spacing(0.5),\n  },\n  fullWidth: {\n    width: \"100%\",\n  },\n  title: {\n    textAlign: \"center\",\n    padding: theme.spacing(0.5),\n    marginBottom: theme.spacing(1),\n  },\n  hr: {\n    width: \"100%\",\n  },\n  balance: {\n    padding: theme.spacing(1),\n    overflow: \"wrap\",\n    textAlign: \"center\",\n  },\n  footer: {\n    marginTop: \"285px\",\n  },\n});\n\nconst useStyles = makeStyles(styles);\n\nfunction CoinSwapper(props) {\n  const classes = useStyles();\n  const { enqueueSnackbar } = useSnackbar();\n\n  // Stores a record of whether their respective dialog window is open\n  const [dialog1Open, setDialog1Open] = React.useState(false);\n  const [dialog2Open, setDialog2Open] = React.useState(false);\n  const [wrongNetworkOpen, setwrongNetworkOpen] = React.useState(false);\n\n  // Stores data about their respective coin\n  const [coin1, setCoin1] = React.useState({\n    address: undefined,\n    symbol: undefined,\n    balance: undefined,\n  });\n  const [coin2, setCoin2] = React.useState({\n    address: undefined,\n    symbol: undefined,\n    balance: undefined,\n  });\n\n  // Stores the current reserves in the liquidity pool between coin1 and coin2\n  const [reserves, setReserves] = React.useState([\"0.0\", \"0.0\"]);\n\n  // Stores the current value of their respective text box\n  const [field1Value, setField1Value] = React.useState(\"\");\n  const [field2Value, setField2Value] = React.useState(\"\");\n\n  // Controls the loading button\n  const [loading, setLoading] = React.useState(false);\n\n  // Switches the top and bottom coins, this is called when users hit the swap button or select the opposite\n  // token in the dialog (e.g. if coin1 is TokenA and the user selects TokenB when choosing coin2)\n  const switchFields = () => {\n    setCoin1(coin2);\n    setCoin2(coin1);\n    setField1Value(field2Value);\n    setReserves(reserves.reverse());\n  };\n\n  // These functions take an HTML event, pull the data out and puts it into a state variable.\n  const handleChange = {\n    field1: (e) => {\n      setField1Value(e.target.value);\n    },\n  };\n\n  // Turns the account's balance into something nice and readable\n  const formatBalance = (balance, symbol) => {\n    if (balance && symbol)\n      return parseFloat(balance).toPrecision(8) + \" \" + symbol;\n    else return \"0.0\";\n  };\n\n  // Turns the coin's reserves into something nice and readable\n  const formatReserve = (reserve, symbol) => {\n    if (reserve && symbol) return reserve + \" \" + symbol;\n    else return \"0.0\";\n  };\n\n  // Determines whether the button should be enabled or not\n  const isButtonEnabled = () => {\n\n    // If both coins have been selected, and a valid float has been entered which is less than the user's balance, then return true\n    const parsedInput1 = parseFloat(field1Value);\n    const parsedInput2 = parseFloat(field2Value);\n    return (\n      coin1.address &&\n      coin2.address &&\n      !isNaN(parsedInput1) &&\n      !isNaN(parsedInput2) &&\n      0 < parsedInput1 &&\n      parsedInput1 <= coin1.balance\n    );\n  };\n\n  // Called when the dialog window for coin1 exits\n  const onToken1Selected = (address) => {\n    // Close the dialog window\n    setDialog1Open(false);\n\n    // If the user inputs the same token, we want to switch the data in the fields\n    if (address === coin2.address) {\n      switchFields();\n    }\n    // We only update the values if the user provides a token\n    else if (address) {\n      // Getting some token data is async, so we need to wait for the data to return, hence the promise\n      getBalanceAndSymbol(props.network.account, address, props.network.provider, props.network.signer, props.network.weth.address, props.network.coins).then((data) => {\n        setCoin1({\n          address: address,\n          symbol: data.symbol,\n          balance: data.balance,\n        });\n      });\n    }\n  };\n\n  // Called when the dialog window for coin2 exits\n  const onToken2Selected = (address) => {\n    // Close the dialog window\n    setDialog2Open(false);\n\n    // If the user inputs the same token, we want to switch the data in the fields\n    if (address === coin1.address) {\n      switchFields();\n    }\n    // We only update the values if the user provides a token\n    else if (address) {\n      // Getting some token data is async, so we need to wait for the data to return, hence the promise\n      getBalanceAndSymbol(props.network.account, address, props.network.provider, props.network.signer, props.network.weth.address, props.network.coins).then((data) => {\n        setCoin2({\n          address: address,\n          symbol: data.symbol,\n          balance: data.balance,\n        });\n      });\n    }\n  };\n\n  // Calls the swapTokens Ethereum function to make the swap, then resets nessicary state variables\n  const swap = () => {\n    console.log(\"Attempting to swap tokens...\");\n    setLoading(true);\n\n    swapTokens(\n      coin1.address,\n      coin2.address,\n      field1Value,\n      props.network.router,\n      props.network.account,\n      props.network.signer\n    )\n      .then(() => {\n        setLoading(false);\n\n        // If the transaction was successful, we clear to input to make sure the user doesn't accidental redo the transfer\n        setField1Value(\"\");\n        enqueueSnackbar(\"Transaction Successful\", { variant: \"success\" });\n      })\n      .catch((e) => {\n        setLoading(false);\n        enqueueSnackbar(\"Transaction Failed (\" + e.message + \")\", {\n          variant: \"error\",\n          autoHideDuration: 10000,\n        });\n      });\n  };\n\n  // The lambdas within these useEffects will be called when a particular dependency is updated. These dependencies\n  // are defined in the array of variables passed to the function after the lambda expression. If there are no dependencies\n  // the lambda will only ever be called when the component mounts. These are very useful for calculating new values\n  // after a particular state change, for example, calculating the new exchange rate whenever the addresses\n  // of the two coins change.\n\n  // This hook is called when either of the state variables `coin1.address` or `coin2.address` change.\n  // This means that when the user selects a different coin to convert between, or the coins are swapped,\n  // the new reserves will be calculated.\n  useEffect(() => {\n    console.log(\n      \"Trying to get Reserves between:\\n\" + coin1.address + \"\\n\" + coin2.address\n    );\n\n    if (coin1.address && coin2.address) {\n      getReserves(coin1.address, coin2.address, props.network.factory, props.network.signer, props.network.account).then(\n        (data) => setReserves(data)\n      );\n    }\n  }, [coin1.address, coin2.address, props.network.account, props.network.factory, props.network.router, props.network.signer]);\n\n  // This hook is called when either of the state variables `field1Value` `coin1.address` or `coin2.address` change.\n  // It attempts to calculate and set the state variable `field2Value`\n  // This means that if the user types a new value into the conversion box or the conversion rate changes,\n  // the value in the output box will change.\n  useEffect(() => {\n    if (isNaN(parseFloat(field1Value))) {\n      setField2Value(\"\");\n    } else if (parseFloat(field1Value) && coin1.address && coin2.address) {\n      getAmountOut(coin1.address, coin2.address, field1Value, props.network.router, props.network.signer).then(\n        (amount) => setField2Value(amount.toFixed(7))\n      ).catch(e => {\n        console.log(e);\n        setField2Value(\"NA\");\n      })\n    } else {\n      setField2Value(\"\");\n    }\n  }, [field1Value, coin1.address, coin2.address]);\n\n  // This hook creates a timeout that will run every ~10 seconds, it's role is to check if the user's balance has\n  // updated has changed. This allows them to see when a transaction completes by looking at the balance output.\n  useEffect(() => {\n    const coinTimeout = setTimeout(() => {\n      console.log('props: ', props);\n      console.log(\"Checking balances...\");\n\n      if (coin1.address && coin2.address && props.network.account) {\n        getReserves(\n          coin1.address,\n          coin2.address,\n          props.network.factory,\n          props.network.signer,\n          props.network.account\n        ).then((data) => setReserves(data));\n      }\n\n      if (coin1.address && props.network.account &&!wrongNetworkOpen) {\n        getBalanceAndSymbol(\n          props.network.account,\n          coin1.address,\n          props.network.provider,\n          props.network.signer,\n          props.network.weth.address,\n          props.network.coins\n          ).then(\n          (data) => {\n            setCoin1({\n              ...coin1,\n              balance: data.balance,\n            });\n          }\n        );\n      }\n      if (coin2.address && props.network.account &&!wrongNetworkOpen) {\n        getBalanceAndSymbol(\n          props.network.account,\n          coin2.address,\n          props.network.provider,\n          props.network.signer,\n          props.network.weth.address,\n          props.network.coins\n          ).then(\n          (data) => {\n            setCoin2({\n              ...coin2,\n              balance: data.balance,\n            });\n          }\n        );\n      }\n    }, 10000);\n\n    return () => clearTimeout(coinTimeout);\n  });\n\n  return (\n    <div>\n      {/* Dialog Windows */}\n      <CoinDialog\n        open={dialog1Open}\n        onClose={onToken1Selected}\n        coins={props.network.coins}\n        props={props.network.signer}\n      />\n      <CoinDialog\n        open={dialog2Open}\n        onClose={onToken2Selected}\n        coins={props.network.coins}\n        signer={props.network.signer}\n      />\n      <WrongNetwork\n        open={wrongNetworkOpen}\n        />\n\n      {/* Coin Swapper */}\n      <Container maxWidth=\"xs\">\n        <Paper className={classes.paperContainer}>\n          <Typography variant=\"h5\" className={classes.title}>\n            Swap Coins\n          </Typography>\n\n          <Grid container direction=\"column\" alignItems=\"center\" spacing={2}>\n            <Grid item xs={12} className={classes.fullWidth}>\n              <CoinField\n                activeField={true}\n                value={field1Value}\n                onClick={() => setDialog1Open(true)}\n                onChange={handleChange.field1}\n                symbol={coin1.symbol !== undefined ? coin1.symbol : \"Select\"}\n              />\n            </Grid>\n\n            <IconButton onClick={switchFields} className={classes.switchButton}>\n              <SwapVerticalCircleIcon fontSize=\"medium\" />\n            </IconButton>\n\n            <Grid item xs={12} className={classes.fullWidth}>\n              <CoinField\n                activeField={false}\n                value={field2Value}\n                onClick={() => setDialog2Open(true)}\n                symbol={coin2.symbol !== undefined ? coin2.symbol : \"Select\"}\n              />\n            </Grid>\n\n            <hr className={classes.hr} />\n\n            {/* Balance Display */}\n            <Typography variant=\"h6\">Your Balances</Typography>\n            <Grid container direction=\"row\" justifyContent=\"space-between\">\n              <Grid item xs={6}>\n                <Typography variant=\"body1\" className={classes.balance}>\n                  {formatBalance(coin1.balance, coin1.symbol)}\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body1\" className={classes.balance}>\n                  {formatBalance(coin2.balance, coin2.symbol)}\n                </Typography>\n              </Grid>\n            </Grid>\n\n            <hr className={classes.hr} />\n\n            {/* Reserves Display */}\n            <Typography variant=\"h6\">Reserves</Typography>\n            <Grid container direction=\"row\" justifyContent=\"space-between\">\n              <Grid item xs={6}>\n                <Typography variant=\"body1\" className={classes.balance}>\n                  {formatReserve(reserves[0], coin1.symbol)}\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body1\" className={classes.balance}>\n                  {formatReserve(reserves[1], coin2.symbol)}\n                </Typography>\n              </Grid>\n            </Grid>\n\n            <hr className={classes.hr} />\n\n            <LoadingButton\n              loading={loading}\n              valid={isButtonEnabled()}\n              success={false}\n              fail={false}\n              onClick={swap}\n            >\n              <LoopIcon />\n              Swap\n            </LoadingButton>\n          </Grid>\n        </Paper>\n      </Container>\n\n      <Grid\n        container\n        className={classes.footer}\n        direction=\"row\"\n        justifyContent=\"center\"\n        alignItems=\"flex-end\"\n      >\n        <p>\n        Grade0 Swap Interface\n        </p>\n      </Grid>\n    </div>\n  );\n}\n\nexport default CoinSwapper;"]},"metadata":{},"sourceType":"module"}